(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8406:function(e,t,n){Promise.resolve().then(n.bind(n,9547))},9547:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var s=n(7437),o=n(2265),r=n(3606),a=n(5314),i=n(8969),l=n(2694),d=n.n(l);let c=new(d()).graphlib.Graph;var u=n(3540),f=(0,o.memo)(function(e){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.pM,{isVisible:e.selected}),(0,s.jsx)(r.HH,{type:"target",position:e.targetPosition||r.Ly.Top}),(0,s.jsx)("div",{className:"flex flex-col",children:(0,s.jsx)("p",{className:"text-md",children:e.data.label})}),(0,s.jsx)(r.HH,{type:"source",position:e.sourcePosition||r.Ly.Bottom})]})});n(7333);let p={SubFlow:f};function h(){let{fitView:e}=(0,r._K)(),[t,n,l]=(0,r.Rr)([]),[u,f,h]=(0,r.ll)([]),[x,m]=(0,o.useState)(!1);(0,o.useEffect)(()=>{fetch("/flow").then(e=>e.json()).then(e=>{n(Array.from(e.nodes).map(e=>({data:{label:e.name},position:{x:0,y:0},deletable:!1,connectable:!1,extent:"parent",expandParent:!0,...e}))),f(Array.from(e.edges).map(e=>({animated:!0,...e}))),m(!0)}).catch(e=>console.error(e))},[]),(0,o.useEffect)(()=>{x&&g("TB")},[x]);let g=(0,o.useCallback)(s=>{let o=(c.setGraph({rankdir:s,nodesep:80,marginy:50,ranksep:80}),c.setDefaultEdgeLabel(()=>({})),u.forEach(e=>c.setEdge(e.source,e.target)),t.forEach(e=>c.setNode(e.id,e.data)),d().layout(c),{nodes:t.map(e=>{let{x:t,y:n}=c.node(e.id);return{...e,position:{x:t,y:n}}}),edges:u});n([...o.nodes]),f([...o.edges]),window.requestAnimationFrame(()=>{e()})},[t,u]);return(0,s.jsxs)(r.x$,{nodes:t,edges:u,onNodesChange:l,onEdgesChange:h,fitView:!0,nodeTypes:p,children:[(0,s.jsx)(a.A,{}),(0,s.jsx)(r.s_,{position:"top-right",children:(0,s.jsx)("button",{onClick:()=>{g("TB")},children:"Refresh"})}),(0,s.jsx)(i.Z,{})]})}function x(){return(0,s.jsx)(r.tV,{children:(0,s.jsx)(h,{})})}}},function(e){e.O(0,[780,35,971,69,744],function(){return e(e.s=8406)}),_N_E=e.O()}]);